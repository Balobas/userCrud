# userCrud
Небольшой gRPC CRUD сервис для операций с пользователями  
Состоит из самого сервиса и клиента с тестами в папке testClient  

При написании использовались принципы чистой архитектуры.  
Слой бизнес сущностей и бизнес логики не зависит ни от одного из других, 
что позволяет просто заменять компоненты и добавлять новые реализации.  
Слой repository содержит реализацию работы с объектом на уровне базы данных.  
Слой интерфейсов содержит в себе обработчики запросов.

В качестве базы данных реализована MongoDB

Бизнес сущности:

  Пользователь  
  поля:  
  uid - уникальный идентификатор  
  lastName - фамилия пользователя  
  name - имя пользователя  
  patronymic - отчество пользователя  
  phoneNumber - номер телефона  
  createdDateTime - время создания пользователя в системе  
  updatedDateTime - время обновления пользователя в системе  
  isArchived - признак архивации пользователя
  
  Из обязательных полей пользователь имеет имя, фамилию, время создания сущности в системе, время обновления сущности в системе, а так же признак того, архивирован ли пользователь или нет (Архивация как аналог удаления с точки зрения использующего систему, но данные не удаляются из базы и при желании можно "восстановить" данные об архивированном пользователе.  
Из необязательных отчество, номер телефона. Так же пользователь имеет свой уникальный идентификатор.
  
Правила:  
  * Уникальный идентефикатор соответствует только одному пользователю, нельзя создать больше чем одного пользователя с одним и тем же идентификатором  

  * Имя и фамилия являются обязательными параметрами в сущности пользователя  

  * Отчество и номер телефона могут не указываться  

  * Если указан номер телефона, то ему может соответствовать только один пользователь. Нельзя создать двух пользователей с одним номером телефона  

  * Если номер телефона не указан, то нельзя создать пользователя с фамилией, именем и отчеством, совпадающими с теми же параметрами пользователя, уже хранящегося в системе  

  * Нельзя архивировать уже архивированного пользователя  

  * Нельзя восстановить из архива не архивированного пользователя  

  * Архивированные пользователи не отображаются при запросе всех пользователей  

  * Поля "время создания" и "время обновления" записываются автоматически  
  
Описание API:  
  
  Создание пользователя  
  CreateUser 
    Входные параметры:  
      "user" :  
      {  
            "name",   
            "lastName",  
             "patronymic",  
             "phoneNumber",  
             "createdDateTime",  
             "updatedDateTime",  
             "isArchived"  
       }  
    Возвращает:  
      "uid" - уникальный идентификатор созданного пользователя  
      
   Обновление сущности пользователя  
   UpdateUser  
    Входные параметры:  
      "user" :  
      {  
            "name",   
            "lastName",  
             "patronymic",  
             "phoneNumber",  
             "createdDateTime",  
             "updatedDateTime",  
             "isArchived"  
       }  
    Возвращает ошибку в случае ее наличия  
   
   Архивирование пользователя  
   ArchiveUser  
    Входные параметры:  
    "userUid"  
    Возвращает ошибку в случае ее наличия  
    
   Отмена архивирования  
   RestoreUser  
    Входные параметры:  
    "userUid"  
    Возвращает ошибку в случае ее наличия  
    
   Удаление пользователя из системы  
   DeleteUser  
    Входные параметры:  
    "userUid"  
    Возвращает ошибку в случае ее наличия  
    
   Получение пользователя по идентификатору  
   GetUserByUID  
    Входные параметры:  
    "userUid"  
    Возвращает сущность пользователя и ошибку в случае ее наличия  
    
   Получение списка подходящих по ФИО пользователей  
   GetUsersByFIO
    Входные параметры:
    "lastName", "name", "patronymic"  
    Возвращает список пользователей и ошибку в случае ее наличия  
    
   Получение пользователя по номеру телефона  
   GetUserByPhoneNumber  
   Входные параметры:  
   "phone"  
   Возбращает сущность пользователя и ошибку в случае ее наличия  
     
